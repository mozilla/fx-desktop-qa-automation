---
transforms:
  - fx_desktop_qa_automation_taskgraph.transforms.lint:transforms

task-defaults:
  worker-type: t-linux-wayland
  worker:
    max-run-time: 1800

tasks:
  linux:
    run:
      using: run-task
      cwd: "{checkout}"
      command: |-
        export PATH=$HOME/.local/bin:$PWD:$PATH
        pip3 install 'pipenv==2023.11.15';
        pipenv install;
        pipenv run python3 -m ruff version;
        pipenv run python3 -m ruff format --check;
        export EXIT_CODE=$?;
        pipenv run python3 -m ruff check --select I;
        exit $(( $EXIT_CODE || $? ));
